// ==========================================
// 1. 用户表 (User)
// ==========================================
model User {
  id       Int     @id @default(autoincrement())
  username String  @unique
  password String // 加密后的密码
  nickname String? // 昵称
  avatar   String? // 头像
  email    String?
  status   Int     @default(1) // 1:启用 0:禁用

  // 关联：用户所属部门
  deptId Int?
  dept   Department? @relation("DeptUsers", fields: [deptId], references: [id])

  managedDepts Department[] @relation("DeptManager")

  // 关联：一个用户可以有多个角色 (多对多)
  roles Role[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ==========================================
// 2. 角色表 (Role)
// ==========================================
model Role {
  id          Int     @id @default(autoincrement())
  name        String  @unique // 角色编码 (如 admin)
  description String? // 角色名称 (如 超级管理员)
  status      Int     @default(1)

  // 关联：角色包含多个用户
  users User[]

  // 关联：角色包含多个菜单权限
  menus Menu[]

  createdAt DateTime @default(now())
}

model Todo {
  id        Int      @id @default(autoincrement())
  title     String   @db.VarChar(255)
  completed Boolean  @default(false)
  createdAt DateTime @default(now())
}
